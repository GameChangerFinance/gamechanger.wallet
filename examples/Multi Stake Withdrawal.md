
# Cardano Example Dapp

## **Multi Stake Withdrawal**

Script that requests 3 child wallet's reward addresses from an specific workspace, to later withdraw some staking rewards from each of them on a single transaction. You need to have staking rewards on each child wallet and run 'Multi Stake Delegation' demo first or load it's wallet configuration on this device


## Try it online: 

-  Visit [HTML5 Dapp](https://gamechangerfinance.github.io/gamechanger.wallet/examples/Multi%20Stake%20Withdrawal.html)
-  Run [Standalone URL dapp connection](https://beta-wallet.gamechanger.finance/api/2/run/1-H4sIAAAAAAAAA61UwW7bMAz9FcKXbECaZOittzQ9rMA2FG23Yhh2YC06FipLrkQ3CQL_-yjFdl006w5dDklMkY-P71HeZ7yrKTvLQu51zdk0Y80mBr42hjXcMD4Q3GkulccNGklQdMjVzkraTfoPXCKDp8eGAgc4hbzURoEUGOJJkJMNegWolKcQKEDhXQVoIdSU60LnsHH-IdSY0xTYgUEmD5uuLQRXEQShou26w-ogCPMSXCH9qQJnASFIjiFgjzZgHlnO4KdrwBKpCF3i02ssqUxIY9pCT4FvLEzGUlyQoTVG2AkoqhwU2gcG58E4VKDjtF197myh141P2bEFlzpI0ZPOSXSMamkvUu8z6zj-HOpuxZBLkfZXRlsmG6LOv9t2Ko-187wMvTm9K-ZCeCRAbrz9fv3lClnki-6UzPXZfG5cjqZ0gc9OF4vFPPKeY63nCus6FjY2tg_Ed70L8bnfDOJV4z3Z0ek0G_y6VJITEUPWxuWoySqyuaYwxui3q2t10P0HmmbcSSGj5DwdwtmnRfpE2GFxRtlr4uUQnmYPtHuee4-edSH2f8OK2qyN8vH2LUb3jTjfKzrKS_HbrSRagZJAn5NivE2-DdcjdVjGr45x5CJEP0xyWS-ajeWZDUPNrpMc3TQny_5k8rGVHo8NWrmUu7egRnrGIpn2_J0kzv8HidU7SazeTyJZH_TaHvE2hm-3ofP2eXtinNTJXlaqTS88Rm1IXZGvdIj3UYYpxGwalmozgL9gJqezF4slkc-0PRATWs19pfkYsXRwlFo64RG7xOBV1_HEnQ7TrNBW3jC7Y7fgb--W0dvhuIYV5t71Wf8eHkPZ29L-Af3Ftsh8BgAA)

## Source code:

- dapp connection code: [GCScript DSL](Multi%20Stake%20Withdrawal.gcscript)
- frontend (using @gamechanger-finance/gc): [HTML5 dapp](Multi%20Stake%20Withdrawal.html)
- frontend (without official library): [Native HTML5 dapp](Multi%20Stake%20Withdrawal_nolib.html)

Dapp code was autogenerated by [Playground IDE in GameChanger Wallet ](https://beta-wallet.gamechanger.finance/playground)

## GCScript code (dapp connection):
```json
{
  "type": "script",
  "title": "Multi Stake Withdrawal",
  "description": "Script that requests 3 child wallet's reward addresses from an specific workspace, to later withdraw some staking rewards from each of them on a single transaction. You need to have staking rewards on each child wallet and run 'Multi Stake Delegation' demo first or load it's wallet configuration on this device",
  "require": {
    "not": {
      "walletTypeIn": [
        "extension"
      ]
    }
  },
  "exportAs": "MultiWithdrawlDemo",
  "returnURLPattern": "http://localhost:3000/demo/api/dapp",
  "run": {
    "setWorkspace": {
      "type": "setCurrentWorkspace",
      "workspaceId": "demos"
    },
    "dependencies": {
      "type": "script",
      "run": {
        "rewardValue": {
          "type": "data",
          "value": "1000000"
        },
        "addresses": {
          "type": "getAddresses",
          "keyPattern": "{artifactName}"
        }
      }
    },
    "txs": {
      "type": "script",
      "run": {
        "buildWithdraw": {
          "type": "buildTx",
          "name": "WithdrawTx",
          "tx": {
            "withdrawals": {
              "A": {
                "address": "{get('cache.dependencies.addresses.RewardAddress-A.address')}",
                "quantity": "{get('cache.dependencies.rewardValue')}"
              },
              "B": {
                "address": "{get('cache.dependencies.addresses.RewardAddress-B.address')}",
                "quantity": "{get('cache.dependencies.rewardValue')}"
              },
              "C": {
                "address": "{get('cache.dependencies.addresses.RewardAddress-C.address')}",
                "quantity": "{get('cache.dependencies.rewardValue')}"
              }
            }
          }
        },
        "signWithdraw": {
          "type": "signTxs",
          "namePattern": "signed-{key}",
          "detailedPermissions": false,
          "txs": {
            "withdraw": "{get('cache.txs.buildWithdraw.txHex')}"
          }
        },
        "submitWithdraw": {
          "type": "submitTxs",
          "namePattern": "submitted-{key}",
          "txs": "{get('cache.txs.signWithdraw')}"
        }
      }
    },
    "finally": {
      "type": "script",
      "exportAs": "MultiWithdraw",
      "run": {
        "signWithdraw": {
          "type": "macro",
          "run": "{get('cache.txs.buildWithdraw.txHash')}"
        }
      }
    }
  }
}
```

## Run standalone QR dapp connection: 

You can use [Playground IDE in GameChanger Wallet ](https://beta-wallet.gamechanger.finance/playground) in `QR URL Transport` mode to capture results

[![This GCScript/URL is too large! make it shorter uploading parts to GCFS. Unable to generate QR code](Multi%20Stake%20Withdrawal.png)](https://gamechangerfinance.github.io/gamechanger.wallet/examples/Multi%20Stake%20Withdrawal.png)

## Resources
- [How to connect?](https://www.npmjs.com/package/@gamechanger-finance/gc)
- [Docs and examples on Github](https://github.com/GameChangerFinance/gamechanger.wallet/)
- [GCScript documentation](https://beta-wallet.gamechanger.finance/doc/api/v2)
- [Playground IDE in GameChanger Wallet ](https://beta-wallet.gamechanger.finance/playground)
- [Tutorials on Youtube](https://www.youtube.com/@gamechanger.finance)
- [Support on Discord](https://discord.gg/vpbfyRaDKG)
- [News on Twitter](https://twitter.com/GameChangerOk)
- [Website](https://gamechanger.finance)

## License
MIT 
    
