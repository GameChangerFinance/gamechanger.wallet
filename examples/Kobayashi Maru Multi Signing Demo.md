
# Cardano Example Dapp

## **Kobayashi Maru Multi Signing Demo**

Demo that tries to sign 3 transactions with unobtainable foreign keys and internal spending and staking private keys


## Try it online: 

-  Visit [HTML5 Dapp](https://gamechangerfinance.github.io/gamechanger.wallet/examples/Kobayashi%20Maru%20Multi%20Signing%20Demo.html)
-  Run [Standalone URL dapp connection](https://beta-wallet.gamechanger.finance/api/2/run/1-H4sIAAAAAAAAA7VYS1PjOBD-Ky5fgKpssPM2N2pmq4YCZilgaw87HNqSHGuxZUeS8xgq_33Vik0c4gyEZHJx3Gp199etfsgvruY6Ye6Fe52FsAAVc-cWZOHcFonmzgMfCy7GzleWZm7LpUwRyXPNM2F2INHRMWhHS86UozNHGX6na95BKCDIp5wZ17FTiCzUwAWECXOiTDJkfGYL5YCgDheaSQGJo3ImKCpEqtLwjP9zyaegmWU3RuhFjvauLDHvkk0KLg3pxRWZxscMkoTpR8N3Zez81w0LKZg0rGMeafdpucRN2hD_vr-5A426jcBY6_zi_DzJCCRxpvRF1_O8c2pAnkPOzynkuRHB5nkm9aUyG6yLjIfQhkKgYsrQfiaIcQe-b5uKWnElzahdyVJm6BaZMTQ1HnpAEdds8c3EwixZknEEW5NIISUT-g1jRd3krTx7a_4YX95lCScLC-ND9ErQ0_IVIxp0Salkqg5xzPRtbWH5ak8j65fNtWWrLvVKRFmNPQUis8rF7ovZXeM7Na-nJwRIzNp157dr8k7OzpbbBh1Fy6bIShHqvmczkHQb_Lae98xHA9qyLu5kA8-Bmra90qhs62QeDCmHRWoUl_Lqauon-GA1ZRHZVNOUQcfwXCOmpsQ8hrJGZM35vlYnQPMpe6gKUlmZzLopmaYCmadY2GdehKXkb2z-AcvqvlzZ8gkZNRdVMlYWrvaPOp7XH_kERlEw9L0eGYQjQvrUD4YR87sDOvK7LOjQEWE9fxhG0KFRrxf2ut2uH_Uj4i6fUCToGwbKoPZbbhY9xkyx_SC_TYa98b495r8LrG11O0r6-kxQ0GDOwhSSAl8_r3BXW9ml6siAq-O8DgCNaBAGdEioEQ2kR6JoMOhFYdTv0j4jAIEfen7PN2IDL-pRoCTokLD3KuqeRaWkkT_qjzodNPLwyCwxLmHBE9o4JawaLc5Nl0lybWeDVy6763GOc9AcyVmh80KvOLI_S_f_Ywcgm9ZVX7D__EkQAaST4HnQ7w_HU9btQ6rpJI-DIA4mHT2Pf3pDEsN8PChmszEd_DeYehHxeqLP4nEn6CzmU2UeU6bkZJLOJ5HIh4tiJoaLCflZTGY4ZYFSDC3CaoJ_v0OKll_9NROPMVfXqzEut2fjiv4qTxqrWXsjypg6LXdSgOHQ5qi5HZtJG4q_Zt8zvb_2xsP8vnabdKnZs3LBUXF-zLU1e3yvLHpHBbzLjAZHb9ny1MKTLcyhXM3I9Y5kCY3OKDvWZ31YGd6I8H3Zv3TMSjYGPbM3I0jw1sSkBbOr-H5YV61DNE1h-zWppgFrvy61Y3baezzYMRbtPyKg37FSPpQ3x3fKZXlZpLUQHe7U47hkDeV1sPsMkqME9-CgIBb8GFDvb-b1cY41QZhysb53X1WJW16n_3gx1-EyWSUYYFoWDFFjF3v5IZyGH97XpITFafNyyVJhsK5s1_prW89tGrf23F4_dJ-WsY72OyLOfojthaX9LKOBJ4zeMZlypfCri3sRQaIYRqEIU67rcbCEVSTKzxAJaPt9ZDMwWwEpQ1CDgTE1Vt9wpcvA_w8P2Rp5URIAAA)

## Source code:

- dapp connection code: [GCScript DSL](Kobayashi%20Maru%20Multi%20Signing%20Demo.gcscript)
- frontend (using @gamechanger-finance/gc): [HTML5 dapp](Kobayashi%20Maru%20Multi%20Signing%20Demo.html)
- frontend (without official library): [Native HTML5 dapp](Kobayashi%20Maru%20Multi%20Signing%20Demo_nolib.html)

Dapp code was autogenerated by [Playground IDE in GameChanger Wallet ](https://beta-wallet.gamechanger.finance/playground)

## GCScript code (dapp connection):
```json
{
  "title": "Kobayashi Maru Multi Signing Demo",
  "description": "Demo that tries to sign 3 transactions with unobtainable foreign keys and internal spending and staking private keys",
  "type": "script",
  "require": {
    "not": {
      "walletTypeIn": [
        "burner",
        "gift"
      ]
    }
  },
  "returnURLPattern": "http://localhost:3000/demo/api/dapp",
  "exportAs": "MultiSig",
  "run": {
    "dependencies": {
      "type": "script",
      "return": {
        "mode": "some",
        "keys": [
          "mainSpendKeyHash",
          "mainStakeKeyHash",
          "currentSpendKeyHash",
          "currentStakeKeyHash",
          "internalMintingPolicy",
          "externalMintingPolicy",
          "externalMintingKeyHash"
        ]
      },
      "run": {
        "mainAddress": {
          "type": "getMainAddress"
        },
        "currentAddress": {
          "type": "getCurrentAddress"
        },
        "mainAddressInfo": {
          "type": "macro",
          "run": "{getAddressInfo(get('cache.dependencies.mainAddress'))}"
        },
        "currentAddressInfo": {
          "type": "macro",
          "run": "{getAddressInfo(get('cache.dependencies.currentAddress'))}"
        },
        "mainRewardAddress": {
          "type": "macro",
          "run": "{get('cache.dependencies.mainAddressInfo.rewardAddress')}"
        },
        "currentRewardAddress": {
          "type": "macro",
          "run": "{get('cache.dependencies.currentAddressInfo.rewardAddress')}"
        },
        "mainSpendKeyHash": {
          "type": "macro",
          "run": "{get('cache.dependencies.mainAddressInfo.paymentKeyHash')}"
        },
        "mainStakeKeyHash": {
          "type": "macro",
          "run": "{get('cache.dependencies.mainAddressInfo.stakingKeyHash')}"
        },
        "currentSpendKeyHash": {
          "type": "macro",
          "run": "{get('cache.dependencies.currentAddressInfo.paymentKeyHash')}"
        },
        "currentStakeKeyHash": {
          "type": "macro",
          "run": "{get('cache.dependencies.currentAddressInfo.stakingKeyHash')}"
        },
        "internalMintingPolicy": {
          "type": "nativeScript",
          "script": {
            "all": [
              {
                "any": [
                  {
                    "pubKeyHashHex": "{get('cache.dependencies.currentSpendKeyHash')}"
                  },
                  {
                    "pubKeyHashHex": "{get('cache.dependencies.currentStakeKeyHash')}"
                  },
                  {
                    "scriptHex": "8200581ca8f97104c6b8cc5d197fe136d813e92d8ce417bfa2df44b43331f5fc"
                  }
                ]
              },
              {
                "atLeast": 1,
                "ofThese": [
                  {
                    "pubKeyHashHex": "{get('cache.dependencies.mainSpendKeyHash')}"
                  },
                  {
                    "pubKeyHashHex": "{get('cache.dependencies.mainStakeKeyHash')}"
                  },
                  {
                    "scriptHex": "8200581ca8f97104c6b8cc5d197fe136d813e92d8ce417bfa2df44b43331f5fc"
                  }
                ]
              }
            ]
          }
        },
        "externalMintingKeyHash": {
          "type": "data",
          "value": "a8f97104c6b8cc5d197fe136d813e92d8ce417bfa2df44b43331f5fc"
        },
        "externalMintingPolicy": {
          "type": "data",
          "value": {
            "scriptHex": "8200581ca8f97104c6b8cc5d197fe136d813e92d8ce417bfa2df44b43331f5fc",
            "scriptHashHex": "dfd9b9d7cd005ac4cff664fbf53d5ecaa91b0141e9290f4dadc92cb4",
            "scriptRefHex": "d818582282008200581ca8f97104c6b8cc5d197fe136d813e92d8ce417bfa2df44b43331f5fc"
          }
        }
      }
    },
    "build": {
      "type": "script",
      "run": {
        "withAllKeys": {
          "type": "buildTx",
          "tx": {
            "outputs": {
              "toExternalWallet": {
                "address": "addr1q9faamq9k6557gve35amtdqph99h9q2txhz07chaxg6uwwgd6j6v0fc04n5ehg292yxvs292vesrqqmxqfnp7yuwn7yqczuqwr",
                "assets": [
                  {
                    "assetName": "IOwnThisKeys",
                    "policyId": "{get('cache.dependencies.internalMintingPolicy.scriptHashHex')}",
                    "quantity": "2"
                  },
                  {
                    "assetName": "IDoNotOwnThisKeys",
                    "policyId": "{get('cache.dependencies.externalMintingPolicy.scriptHashHex')}",
                    "quantity": "2"
                  }
                ]
              }
            },
            "mints": [
              {
                "policyId": "{get('cache.dependencies.internalMintingPolicy.scriptHashHex')}",
                "assets": [
                  {
                    "assetName": "IOwnThisKeys",
                    "quantity": "10"
                  }
                ]
              },
              {
                "policyId": "{get('cache.dependencies.externalMintingPolicy.scriptHashHex')}",
                "assets": [
                  {
                    "assetName": "IDoNotOwnThisKeys",
                    "quantity": "10"
                  }
                ]
              }
            ],
            "witnesses": {
              "nativeScripts": {
                "internalMintingPolicyScript": "{get('cache.dependencies.internalMintingPolicy.scriptHex')}",
                "externalMintingPolicyScript": "{get('cache.dependencies.externalMintingPolicy.scriptHex')}"
              }
            },
            "optionalSigners": {
              "externalMintingKeyHash": "{get('cache.dependencies.externalMintingKeyHash')}",
              "mainSpendKeyHash": "{get('cache.dependencies.mainSpendKeyHash')}",
              "mainStakeKeyHash": "{get('cache.dependencies.mainStakeKeyHash')}",
              "currentSpendKeyHash": "{get('cache.dependencies.currentSpendKeyHash')}",
              "currentStakeKeyHash": "{get('cache.dependencies.currentStakeKeyHash')}"
            }
          }
        },
        "withSpendingKeys": {
          "type": "buildTx",
          "tx": {
            "requiredSigners": {
              "mainSpendKeyHash": "{get('cache.dependencies.mainSpendKeyHash')}",
              "currentSpendKeyHash": "{get('cache.dependencies.currentSpendKeyHash')}"
            }
          }
        },
        "withStakingKeys": {
          "type": "buildTx",
          "tx": {
            "requiredSigners": {
              "mainStakeKeyHash": "{get('cache.dependencies.mainStakeKeyHash')}",
              "currentStakeKeyHash": "{get('cache.dependencies.currentStakeKeyHash')}"
            }
          }
        }
      }
    },
    "sign": {
      "type": "signTxs",
      "namePattern": "InternalMultiSig-{key}",
      "extras": true,
      "txs": "{\n                    getArray(\n                        get('cache.build.withAllKeys.txHex'),\n                        get('cache.build.withSpendingKeys.txHex'),\n                        get('cache.build.withStakingKeys.txHex'),\n                    )\n\n                }",
      "detailedPermissions": false
    },
    "submit": {
      "type": "submitTxs",
      "mode": "later",
      "namePattern": "MultiSig-{key}",
      "txs": "{get('cache.sign.txList')}"
    }
  }
}
```

## Run standalone QR dapp connection: 

You can use [Playground IDE in GameChanger Wallet ](https://beta-wallet.gamechanger.finance/playground) in `QR URL Transport` mode to capture results

[![This GCScript/URL is too large! make it shorter uploading parts to GCFS. Unable to generate QR code](Kobayashi%20Maru%20Multi%20Signing%20Demo.png)](https://gamechangerfinance.github.io/gamechanger.wallet/examples/Kobayashi%20Maru%20Multi%20Signing%20Demo.png)

## Resources
- [How to connect?](https://www.npmjs.com/package/@gamechanger-finance/gc)
- [Docs and examples on Github](https://github.com/GameChangerFinance/gamechanger.wallet/)
- [GCScript documentation](https://beta-wallet.gamechanger.finance/doc/api/v2)
- [Playground IDE in GameChanger Wallet ](https://beta-wallet.gamechanger.finance/playground)
- [Tutorials on Youtube](https://www.youtube.com/@gamechanger.finance)
- [Support on Discord](https://discord.gg/vpbfyRaDKG)
- [News on Twitter](https://twitter.com/GameChangerOk)
- [Website](https://gamechanger.finance)

## License
MIT 
    
